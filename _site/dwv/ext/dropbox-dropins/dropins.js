(function(){function e(e,o,n){return void 0!==e&&null!==e&&"function"==typeof e[o]?n(e,o):void 0}function o(e,o){return void 0!==e&&null!==e?o(e):void 0}var n=this&&this.__assign||Object.assign||function(e){for(var o,n=1,r=arguments.length;n<r;n++){o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e};null==window.Dropbox&&(window.Dropbox={}),null==Dropbox.baseUrl&&(Dropbox.baseUrl="https://www.dropbox.com"),null==Dropbox.blockBaseUrl&&(Dropbox.blockBaseUrl="https://dl-web.dropbox.com"),Dropbox.addListener=function(e,o,n){e.addEventListener?e.addEventListener(o,n,!1):e.attachEvent("on"+o,function(e){return e.preventDefault=function(){return this.returnValue=!1},n(e)})},Dropbox.removeListener=function(e,o,n){e.removeEventListener?e.removeEventListener(o,n,!1):e.detachEvent("on"+o,n)};var r,t=function(e,o,n){return e+(e.indexOf("?")===-1?"?":"&")+o+"="+n},i=function(e){return t(e,"version",encodeURIComponent(Dropbox.VERSION))},s=function(o,n){var r=encodeURIComponent(window.location.protocol+"//"+window.location.host),s=encodeURIComponent(Dropbox.appKey),a=encodeURIComponent(o.linkType||""),l=encodeURIComponent(o._trigger||"js"),c=Boolean(o.multiselect),d=encodeURIComponent(e(o.extensions,"join",function(e){return e.join(" ")})||""),p=Boolean(o.folderselect);n=Boolean(n);var u=Dropbox.baseUrl+"/chooser?origin="+r+"&app_key="+s+"&link_type="+a+"&trigger="+l+"&multiselect="+c+"&extensions="+d+"&folderselect="+p+"&iframe="+n;if(null!=o.initialNavigation){if(null!=o.initialNavigation.mode){u=t(u,"initial_navigation_mode",encodeURIComponent(o.initialNavigation.mode))}if(null!=o.initialNavigation.role){u=t(u,"initial_navigation_role",encodeURIComponent(o.initialNavigation.role))}if(o.initialNavigation.cursor){u=t(u,"initial_navigation_cursor",encodeURIComponent(o.initialNavigation.cursor))}}if(null!=o.fields){u=t(u,"fields",encodeURIComponent("function"==typeof o.fields.join?o.fields.join(" "):void 0))}return i(u)},a=function(){var e=encodeURIComponent(window.location.protocol+"//"+window.location.host),o=encodeURIComponent(Dropbox.appKey);return i(Dropbox.baseUrl+"/saver?origin="+e+"&app_key="+o)},l=1,c=function(e,o){var n,r=encodeURIComponent(Dropbox.appKey),t=Dropbox.baseUrl+"/dropins/job_status?job="+o+"&app_key="+r;t=i(t);var s=function(o){"COMPLETE"===o.status?("function"==typeof e.progress&&e.progress(1),"function"==typeof e.success&&e.success()):"PENDING"===o.status||"DOWNLOADING"===o.status?(null!=o.progress&&"function"==typeof e.progress&&e.progress(o.progress/100),setTimeout(n,1500)):"FAILED"===o.status&&"function"==typeof e.error&&e.error(o.error)};if("withCredentials"in new XMLHttpRequest)n=function(){var o=new XMLHttpRequest;return o.onload=function(){return s(JSON.parse(o.responseText))},o.onerror=function(){return"function"==typeof e.error?e.error():void 0},o.open("GET",t,!0),o.send()};else if(Dropbox.disableJSONP){if("undefined"==typeof XDomainRequest||null===XDomainRequest||"https:"!==document.location.protocol)throw new Error("Unable to find suitable means of cross domain communication");n=function(){var o=new XDomainRequest;return o.onload=function(){return s(JSON.parse(o.responseText))},o.onerror=function(){return"function"==typeof e.error?e.error():void 0},o.open("get",t),o.send()}}else n=function(){var o="DropboxJsonpCallback"+l++,n=!1;window[o]=function(e){return n=!0,s(e)};var r=document.createElement("script");return r.src=t+"&callback="+o,r.onreadystatechange=function(){if("loaded"===r.readyState)return n||"function"==typeof e.error&&e.error(),null!=r.parentNode?r.parentNode.removeChild(r):void 0},document.getElementsByTagName("head")[0].appendChild(r)};return"function"==typeof e.progress&&e.progress(0),n()},d={},p=function(e){var o={options:n({},e,{success:function(n,t){"function"==typeof e.success&&e.success(n,t),r===o&&(r=null)},cancel:function(n){"function"==typeof e.cancel&&e.cancel(n),r===o&&(r=null)}})};return r=o,o},u=function(e,o,n){var r,t=JSON.parse(e.data);switch(r=null!=b&&n._popup?b.contentWindow:e.source,t.method){case"origin_request":e.source.postMessage(JSON.stringify({method:"origin"}),Dropbox.baseUrl);break;case"ready":if(null!=n.files){var i=void 0;if(n._fetch_url_on_save){for(var s=[],a=0;a<n.files.length;a++){var l=n.files[a];s.push({filename:l.filename})}i=JSON.stringify({method:"files_with_callback",params:s})}else i=JSON.stringify({method:"files",params:n.files});if(r.postMessage(i,Dropbox.baseUrl),null!=n._ews_auth_token){var p=JSON.stringify({method:"ews_auth_token",params:{ews_auth_token:n._ews_auth_token}});r.postMessage(p,Dropbox.baseUrl)}}"function"==typeof n.ready&&n.ready();break;case"files_selected":case"files_saved":"function"==typeof o&&o(),"function"==typeof n.success&&n.success(t.params,d);break;case"cursor_changed":d={cursor:t.params};break;case"progress":"function"==typeof n.progress&&n.progress(t.params);break;case"close_dialog":"function"==typeof o&&o(),"function"==typeof n.cancel&&n.cancel(d);break;case"web_session_error":"function"==typeof o&&o(),"function"==typeof n.webSessionFailure&&n.webSessionFailure();break;case"web_session_unlinked":"function"==typeof o&&o(),"function"==typeof n.webSessionUnlinked&&n.webSessionUnlinked();break;case"resize":"function"==typeof n.resize&&n.resize(t.params);break;case"error":"function"==typeof o&&o(),"function"==typeof n.error&&n.error(t.params);break;case"job_id":"function"==typeof o&&o(),c(n,t.params);break;case"save_callback":var u=function(e){if(null==e)throw new Error("Please supply {urls: [...]} to success callback");if(null!=e.url&&null!=e.urls)throw new Error("Do not pass both url and urls to the save callback");if(null!=e.url&&(e.urls=[e.url]),null==e.urls)throw new Error("Please supply {urls: [...]} to success callback");return t={method:"continue_saving",params:{download_urls:e.urls}},void r.postMessage(JSON.stringify(t),Dropbox.baseUrl)};f(n,t.params,u);break;case"_debug_log":"undefined"!=typeof console&&null!==console&&console.log(t.params.msg)}},f=function(e,o,n){if(e._fetch_url_on_save){var r=e.fetch_urls_fn;"function"!=typeof r&&"function"==typeof e.error&&e.error("Something went wrong, file url callback not provided."),r(n,o)}},b=null,m=function(){/\bTrident\b/.test(navigator.userAgent)&&null!=document.body&&null==b&&(b=document.createElement("iframe"),b.setAttribute("id","dropbox_xcomm"),b.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html"),b.style.display="none",document.body.appendChild(b))};Dropbox.createChooserWidget=function(e){var o=p(e),n=v(s(o.options,!0));return n._handler=function(e){e.source===n.contentWindow&&e.origin===Dropbox.baseUrl&&u(e,null,o.options)},Dropbox.addListener(window,"message",n._handler),n},Dropbox.cleanupWidget=function(e){if(!e._handler)throw new Error("Invalid widget!");Dropbox.removeListener(window,"message",e._handler),delete e._handler};var x=function(e,o){return"width="+e+",height="+o+",left="+(window.screenX+((window.outerWidth||document.documentElement.offsetWidth)-e)/2)+",top="+(window.screenY+((window.outerHeight||document.documentElement.offsetHeight)-o)/2)};if(Dropbox._dropinsjs_loaded)e(console,"warn",function(e){return e.warn("dropins.js included more than once")});else{Dropbox._dropinsjs_loaded=!0,null==Dropbox.appKey&&(Dropbox.appKey=o(document.getElementById("dropboxjs"),function(e){return e.getAttribute("data-app-key")}));var g=function(e){return e},h=["text","documents","images","video","audio"];Dropbox.init=function(e){null!=e.translation_function&&(g=e.translation_function),null!=e.appKey&&(Dropbox.appKey=e.appKey)};var v=function(e){var o=document.createElement("iframe");return o.src=e,o.style.display="block",o.style.backgroundColor="white",o.style.border="none",o},w=function(e){var o,n,r;if("string"==typeof e[0])r=e.shift(),o="string"==typeof e[0]?e.shift():C(r),n=e.shift()||{},n.files=[{url:r,filename:o}];else{if(n=e.shift(),null==n)throw new Error("Missing arguments. See documentation.");if((null==n.files||!n.files.length)&&"function"!=typeof n.files)throw new Error("Missing files. See documentation.");if(null!=n.fetch_urls_fn){if("function"!=typeof n.fetch_urls_fn)throw new Error("fetch_urls_fn must be a function if supplied.  See documentation.");n._fetch_url_on_save=!0}for(var t=0;t<n.files.length;t++){var i=n.files[t];if("function"==typeof i.url&&(n._fetch_url_on_save=!0,n.fetch_urls_fn=i.url,i.url=null,t>0))throw new Error("Old style url as callback is only supported for single files.");i.filename||(i.filename=C(i.url))}}return n};Dropbox.save=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n=w(e);if(!Dropbox.isBrowserSupported())return void alert(g("Your browser does not support the Dropbox Saver"));if(n._popup=!0,"object"!=typeof n.files||!n.files.length)throw new Error("The object passed in must have a 'files' property that contains a list of objects. See documentation.");if(n.iframe&&!n.windowName)throw new Error("Dropbox.save does not yet support creating its own iframe.                       windowName must be provided when the iframe option is present.");for(var r=0,t=n.files;r<t.length;r++){var i=t[r];if(n._fetch_url_on_save){if(n.fetch_urls_fn){if(null!=i.url)throw new Error("You passed in a 'fetch_urls_fn' option to specify the file URLs.  Don't include individual URLs in each file objects.")}else if("function"!=typeof i.url)throw new Error("File urls should be all urls, or a single file with function. See documentation.")}else if("string"!=typeof i.url)throw new Error("File urls to download incorrectly configured. Each file must have a url. See documentation.")}var s=x(735,670);return y(a(),s,n).window};var y=function(e,o,n){var r=function(){a.closed||(a.close(),a.postMessage(JSON.stringify({method:"close"}),Dropbox.baseUrl)),Dropbox.removeListener(window,"message",t),clearInterval(l)},t=function(e){e.source!==a&&e.source!==(void 0!==b&&null!==b?b.contentWindow:void 0)||u(e,r,n)},i=function(){(function(){try{return a.closed}catch(e){}})()&&(r(),"function"==typeof n.cancel&&n.cancel(d))},s=n.iframe?"":o+",resizable,scrollbars",a=window.open(e,n.windowName||"dropbox",s);if(!a)throw new Error("Failed to open/load the window. Dropbox.choose and Dropbox.save should only be called from within a user-triggered event handler such as a tap or click event.");a.focus();var l=setInterval(i,100);return Dropbox.addListener(window,"message",t),{window:a,onClose:r}},_=function(o){null==o.success&&e(console,"warn",function(e){return e.warn("You must provide a success callback to the Chooser to see the files that the user selects")});var n=function(){return e(console,"warn",function(e){return e.warn("The provided list of extensions or file types is not valid. See Chooser documentation: https://www.dropbox.com/developers/dropins/chooser/js")}),e(console,"warn",function(e){return e.warn("Available file types are: "+h.join(", "))}),delete o.extensions};if(null!=o.extensions&&null!=Array.isArray)if(Array.isArray(o.extensions))for(var r=0,t=o.extensions;r<t.length;r++){var i=t[r];i.match(/^\.[\.\w$#&+@!()\-'`_~]+$/)||h.indexOf(i)!==-1||n()}else n();return o},D=function(e){if(!Dropbox.isBrowserSupported())return void alert(g("Your browser does not support the Dropbox Chooser"));var o=p(e);if(e.iframe&&!e.windowName){var n=v(s(e,!0));n.style.width="735px",n.style.height="552px",n.style.margin="125px auto 0 auto",n.style.border="1px solid #ACACAC",n.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";var r=document.createElement("div");r.style.position="fixed",r.style.left=r.style.right=r.style.top=r.style.bottom="0",r.style.zIndex="1000",r.style.backgroundColor="rgba(160, 160, 160, 0.2)",r.appendChild(n),document.body.appendChild(r);var t=function(e){e.source===n.contentWindow&&(o.onClose=function(){document.body.removeChild(r),Dropbox.removeListener(window,"message",t)},u(e,o.onClose,o.options))};Dropbox.addListener(window,"message",t)}else{var i=x(735,552);o.onClose=y(s(o.options,o.options.iframe),i,o.options).onClose}};Dropbox.choose=function(e){null==e&&(e={}),e=_(e),D(e)},Dropbox.cancelChooser=function(){r&&(r.onClose&&r.onClose(),r.options.cancel&&r.options.cancel(d))},Dropbox.isBrowserSupported=function(){var e=k();return Dropbox.isBrowserSupported=function(){return e},e};var k=function(){for(var e=0,o=[/IEMobile\/(7|8|9|10)\./,/BB10;/,/CriOS/];e<o.length;e++){if(o[e].test(navigator.userAgent))return!1}return"undefined"!=typeof JSON&&null!==JSON&&null!=window.postMessage&&null!=window.addEventListener&&!/MSIE [7-9]/.test(navigator.userAgent)},E=function(e){return e.replace(/\/+$/g,"").split("/").pop()},C=function(e){var o=document.createElement("a");return o.href=e,E(o.pathname)},N=function(e,o){null!=o?o.innerHTML="":(o=document.createElement("a"),o.href="#"),o.className+=" dropbox-dropin-btn",Dropbox.isBrowserSupported()?o.className+=" dropbox-dropin-default":o.className+=" dropbox-dropin-disabled";var n=document.createElement("span");return n.className="dropin-btn-status",o.appendChild(n),e=document.createTextNode(e),o.appendChild(e),o};Dropbox.createChooseButton=function(e){null==e&&(e={}),e=_(e);var o=N(g("Choose from Dropbox"));return Dropbox.addListener(o,"click",function(n){n.preventDefault(),D({success:function(n,r){o.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof e.success&&e.success(n,r)},cancel:e.cancel,linkType:e.linkType,multiselect:e.multiselect,folderselect:e.folderselect,extensions:e.extensions,iframe:e.iframe,_trigger:"button"})}),o},Dropbox.createSaveButton=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var n=w(e),r=e.shift();return r=N(g("Save to Dropbox"),r),Dropbox.addListener(r,"click",function(e){if(e.preventDefault(),r.className.indexOf("dropbox-dropin-error")>=0||r.className.indexOf("dropbox-dropin-default")>=0||r.className.indexOf("dropbox-dropin-disabled")>=0){var o=("function"==typeof n.files?n.files():void 0)||n.files;if(!(null!=o?o.length:void 0))return r.className="dropbox-dropin-btn dropbox-dropin-error",void("function"==typeof n.error&&n.error("Missing files"));Dropbox.save({files:o,success:function(){r.className="dropbox-dropin-btn dropbox-dropin-success","function"==typeof n.success&&n.success()},progress:function(e){r.className="dropbox-dropin-btn dropbox-dropin-progress","function"==typeof n.progress&&n.progress(e)},cancel:function(){"function"==typeof n.cancel&&n.cancel()},error:function(e){r.className="dropbox-dropin-btn dropbox-dropin-error","function"==typeof n.error&&n.error(e)}})}}),r};var S=function(e,o){return"  background: "+e+";\n  background: -moz-linear-gradient(top, "+e+" 0%, "+o+" 100%);\n  background: -webkit-linear-gradient(top, "+e+" 0%, "+o+" 100%);\n  background: linear-gradient(to bottom, "+e+" 0%, "+o+" 100%);\n  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+e+"', endColorstr='"+o+"',GradientType=0);  "},U=document.createElement("style");U.type="text/css";var L='  @-webkit-keyframes rotate {\n    from  { -webkit-transform: rotate(0deg); }\n    to   { -webkit-transform: rotate(360deg); }\n  }\n\n  @keyframes rotate {\n    from  { transform: rotate(0deg); }\n    to   { transform: rotate(360deg); }\n  }\n\n    .dropbox-dropin-btn, .dropbox-dropin-btn:link, .dropbox-dropin-btn:hover {\n      display: inline-block;\n      height: 14px;\n      font-family: "Lucida Grande", "Segoe UI", "Tahoma", "Helvetica Neue", "Helvetica", sans-serif;\n      font-size: 11px;\n      font-weight: 600;\n      color: #636363;\n      text-decoration: none;\n      padding: 1px 7px 5px 3px;\n      border: 1px solid #ebebeb;\n      border-radius: 2px;\n      border-bottom-color: #d4d4d4;\n      '+S("#fcfcfc","#f5f5f5")+"\n    }\n\n    .dropbox-dropin-default:hover, .dropbox-dropin-error:hover {\n      border-color: #dedede;\n      border-bottom-color: #cacaca;\n      "+S("#fdfdfd","#f5f5f5")+"\n    }\n\n    .dropbox-dropin-default:active, .dropbox-dropin-error:active {\n      border-color: #d1d1d1;\n      box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n    }\n\n    .dropbox-dropin-btn .dropin-btn-status {\n      display: inline-block;\n      width: 15px;\n      height: 14px;\n      vertical-align: bottom;\n      margin: 0 5px 0 2px;\n      background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status.png') no-repeat;\n      position: relative;\n      top: 2px;\n    }\n\n    .dropbox-dropin-default .dropin-btn-status {\n      background-position: 0px 0px;\n    }\n\n    .dropbox-dropin-progress .dropin-btn-status {\n      width: 18px;\n      margin: 0 4px 0 0;\n      background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress.png') no-repeat center center;\n        -webkit-animation-name: rotate;\n        -webkit-animation-duration: 1.7s;\n        -webkit-animation-iteration-count: infinite;\n        -webkit-animation-timing-function: linear;\n      animation-name: rotate;\n      animation-duration: 1.7s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n    }\n\n    .dropbox-dropin-success .dropin-btn-status {\n      background-position: -15px 0px;\n    }\n\n    .dropbox-dropin-disabled {\n      background: #e0e0e0;\n      border: 1px #dadada solid;\n      border-bottom: 1px solid #ccc;\n      box-shadow: none;\n    }\n\n    .dropbox-dropin-disabled .dropin-btn-status {\n      background-position: -30px 0px;\n    }\n\n    .dropbox-dropin-error .dropin-btn-status {\n      background-position: -45px 0px;\n    }\n\n  @media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n      .dropbox-dropin-btn .dropin-btn-status {\n        background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status-2x.png');\n        background-size: 60px 14px;\n          -webkit-background-size: 60px 14px;\n      }\n\n      .dropbox-dropin-progress .dropin-btn-status {\n        background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n        background-size: 20px 20px;\n          -webkit-background-size: 20px 20px;\n      }\n  }\n\n    .dropbox-saver:hover, .dropbox-chooser:hover {\n      text-decoration: none;\n      cursor: pointer;\n    }\n\n    .dropbox-chooser, .dropbox-dropin-btn {\n      line-height: 11px !important;\n      text-decoration: none !important;\n      box-sizing: content-box !important;\n        -webkit-box-sizing: content-box !important;\n        -moz-box-sizing: content-box !important;\n    }\n    ";U.styleSheet?U.styleSheet.cssText=L:U.textContent=L,document.getElementsByTagName("head")[0].appendChild(U),setTimeout(m,0);var O=function(){document.removeEventListener?document.removeEventListener("DOMContentLoaded",O,!1):document.detachEvent&&document.detachEvent("onreadystatechange",O),m(),I()};"interactive"===document.readyState||"complete"===document.readyState?setTimeout(O,0):document.addEventListener?document.addEventListener("DOMContentLoaded",O,!1):document.attachEvent("onreadystatechange",O)}if(!Dropbox._dropinsjs_v2_loaded){Dropbox._dropinsjs_v2_loaded=!0,Dropbox.VERSION="2";var I=function(){for(var e=document.getElementsByTagName("a"),o=0;o<e.length;o++){var n=e[o];(n.getAttribute("class")||"").split(" ").indexOf("dropbox-saver")>=0&&(function(e){Dropbox.createSaveButton({files:function(){return[{url:e.getAttribute("data-url")||e.href,filename:e.getAttribute("data-filename")||E(e.pathname)}]}},e)})(n)}}}}).call(this);
